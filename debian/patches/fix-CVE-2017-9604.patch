From c54706e990bbd6498e7b1597ec7900bc809e8197 Mon Sep 17 00:00:00 2001
From: Montel Laurent <montel@kde.org>
Date: Fri, 2 Jun 2017 13:56:41 +0200
Subject: Make sure to sign/encrypt message when we send later

(cherry picked from commit 4048f5e46d0a7d62d93d74fd2861dd70fb2ad660)
---
 messagecomposer/src/composer/composerviewbase.cpp | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/messagecomposer/src/composer/composerviewbase.cpp b/messagecomposer/src/composer/composerviewbase.cpp
index d44b8b2..672ea1e 100644
--- a/messagecomposer/src/composer/composerviewbase.cpp
+++ b/messagecomposer/src/composer/composerviewbase.cpp
@@ -468,7 +468,7 @@ void MessageComposer::ComposerViewBase::slotEmailAddressResolved(KJob *job)
     // if so, we create a composer per format
     // if we aren't signing or encrypting, this just returns a single empty message
     bool wasCanceled = false;
-    if (m_neverEncrypt && mSaveIn != MessageComposer::MessageSender::SaveInNone) {
+    if (m_neverEncrypt && mSaveIn != MessageComposer::MessageSender::SaveInNone && !mSendLaterInfo) {
         MessageComposer::Composer *composer = new MessageComposer::Composer;
         composer->setNoCrypto(true);
         m_composers.append(composer);
-- 
cgit v0.11.2

